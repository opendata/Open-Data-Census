function showInfo(){var a={al:"Alabama",ar:"Arkansas",az:"Arizona",ak:"Alaska",ca:"California",co:"Colorado",ct:"Connecticut",de:"Delaware",fl:"Florida",ga:"Georgia",hi:"Hawaii",id:"Idaho",il:"Illinois","in":"Indiana",ia:"Iowa",ks:"Kansas",ky:"Kentucky",la:"Louisiana",me:"Maine",md:"Maryland",ma:"Massachusetts",ms:"Mississippi",mi:"Michigan",mn:"Minnesota",mo:"Missouri",mt:"Montana",ne:"Nebraska",nv:"Nevada",nh:"New Hampshire",nj:"New Jersey",nm:"New Mexico",ny:"New York",nc:"North Carolina",nd:"North Dakota",oh:"Ohio",ok:"Oklahoma",or:"Oregon",pa:"Pennsylvania",pr:"Puerto Rico",ri:"Rhode Island",sc:"South Carolina",sd:"South Dakota",tn:"Tennessee",tx:"Texas",ut:"Utah",vt:"Vermont",va:"Virginia",wa:"Washington",dc:"Washington DC",wv:"West Virginia",wi:"Wisconsin",wy:"Wyoming"};rawData=window.placesData;var e={};for(var t in rawData){name=rawData[t].Name;for(var o in a)a[o]==name&&(abbreviation=o);e[abbreviation]=rawData[t].Score}var n={20:"#f7fbff",30:"#deebf7",40:"#c6dbef",50:"#9ecae1",60:"#6baed6",70:"#4292c6",80:"#2171b5",90:"#084594"},r={};for(var t in e)score=10*Math.floor(e[t]/10),score<20&&(score=20),r[t]=n[score];$("#vmap").vectorMap({map:"usa_en",backgroundColor:null,color:"#eee",showTooltip:!0,showLabels:!0,selectedColor:null,hoverColor:"#f66",colors:r,onRegionClick:function(a,e,t){a.preventDefault(),window.location.href="/datasets.html?state="+t}});var i=Handlebars.compile($("#state-template").html());rawData=window.censusData;var s=_.chain(rawData).map(function(a){return a["Type of Data"]}).unique().value();setupDatatypes(s),reversed={};for(var t in a)reversed[a[t]]=t;a=reversed;_.chain(rawData).groupBy("State").map(function(t,o){var n={state:o,state_score:e[a[o]]+"%",state:t[0].State,stateHref:URI().filename("datasets.html").search({state:o}).toString(),datasets:[]};return _.each(s,function(a){var e=_.find(t,function(e){return e["Type of Data"]===a});if(e){var o={grade:e.Grade,score:e.Score,datasetHref:URI().filename("datasets.html").search({state:n.state,datatype:e["Type of Data"]})};for(var r in o)o[r]||(o[r]="DNE");n.datasets.push(o).toString()}}),n}).sortBy("state").each(function(a){var e=i(a);$("#states").append(e)}).value();$('[data-toggle="tooltip"]').tooltip()}function setupDatatypes(a){var e=_.chain(a).map(function(a){return{datatype:a,datatypeHref:URI().filename(a.replace(/ /g,"")+".html").toString()}}).unique().value(),t=Handlebars.compile($("#dataset-template").html()),o=t(e);$("#datasets").append(o)}$(document).ready(function(){showInfo(),$(".table-responsive").doubleScroll()});var rawData=[];